import{J as e,d as a,r as t,a as s,c as n,N as l,o,e as i,O as c,U as r,X as d,Y as u,Z as k,V as m,Q as p,_ as g}from"./vendor.bda5d891.js";import{a as h,b as f}from"./MyCard.f8ba6f02.js";import{C}from"./index.35dbaa2f.js";const v=class{static isBlank(e){return!e||0===e.trim().length}static formatAmount(e){return e?String(e).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):null}static dateWithoutTimezone(e,a=!1){return e&&e instanceof Date?a?e.toISOString():e.toISOString().slice(0,10):null}static dateFormat(a,t="YYYY/MM/DD"){return a&&a instanceof Date?e(a).format(t):null}static datetimeFormat(a,t="YYYY/MM/DD HH:mm:ss"){return a&&a instanceof Date?e(a).format(t):null}static isValidPassword(e){return/[A-Z]+/.test(e)&&/[a-z]+/.test(e)&&/[\d]+/.test(e)&&e.length>=8}static isValidEmail(e){return v.EmailReg.test(e)}static splitBy(e,a){if(e&&a)return e.split(a).join("\n")}static parseBool(e){return null==e||""===e?null:"true"===e}static getCurrentISODate(){return(new Date).toISOString()}};let y=v;y.EmailReg=/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;const b=a({name:"TaskPickerView",emits:["onCancel"],components:{"my-header":h,"my-card":f},setup(e,{emit:a}){const l=t({selectedTimeSpan:0,selectedTaskCategory:null,timeSpanIconSize:50,taskCategoryIconSize:40}),o=s([]),i=s([]),c=n((()=>C.taskTimeSpans)),r=n((()=>C.taskCategories)),d=n((()=>C.taskCategories.map((e=>e.name))));return{state:l,timeSpans:c,taskCategories:r,taskCategoryIndex:d,toggleCheckbox:e=>{i.value[e].toggle(),console.log(i.value[e])},taskCheckboxes:i,onTaskCategoryChange:e=>{l.selectedTaskCategory=e,o.value=[]},taskChecked:o,onCancel:()=>{a("onCancel")}}}});const _={class:"task-picker-view"},w=c("div",{class:"fc-gray-7 g-pb-xs g-fs-20"},[c("span",null,"どの時間帯でやりますか")],-1),I={class:"g-fs-14"},S=c("div",{class:"fc-gray-7 g-pb-xs g-fs-20"},[c("span",null,"何をやりますか")],-1),D={class:"g-fs-12"},x={class:"g-mt-sm"},T=m("タスク登録"),V={class:"g-mt-sm"},Y=m("取消");b.render=function(e,a,t,s,n,m){const h=l("my-header"),f=l("van-image"),C=l("van-grid-item"),v=l("van-grid"),y=l("my-card"),b=l("van-checkbox"),z=l("van-cell"),B=l("van-cell-group"),M=l("van-checkbox-group"),P=l("van-button"),U=l("van-col"),O=l("van-row");return o(),i("section",_,[c(h,{title:"タスク作成"}),c(O,null,{default:r((()=>[c(U,{span:24,class:"g-pa-sm"},{default:r((()=>[c(y,{class:"g-mb-sm"},{default:r((()=>[w,c(v,{"column-num":4,clickable:"",border:!1},{default:r((()=>[(o(!0),i(d,null,u(e.timeSpans,(a=>(o(),i(C,{key:a.key,class:{selected:a.key===e.state.selectedTimeSpan},onClick:t=>e.state.selectedTimeSpan=a.key},{icon:r((()=>[c(f,{src:a.icon,height:e.state.timeSpanIconSize,width:e.state.timeSpanIconSize},null,8,["src","height","width"])])),text:r((()=>[c("span",I,p(a.title),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),c(y,{class:"g-mb-xl"},{default:r((()=>[S,c(v,{"column-num":4,clickable:"",border:!1},{default:r((()=>[(o(!0),i(d,null,u(e.taskCategories,(a=>{var t;return o(),i(C,{key:a.categoryID,class:{selected:a.categoryID===(null==(t=e.state.selectedTaskCategory)?void 0:t.categoryID)},onClick:t=>e.onTaskCategoryChange(a)},{icon:r((()=>[c(f,{src:a.icon,height:e.state.taskCategoryIconSize,width:e.state.taskCategoryIconSize},null,8,["src","height","width"])])),text:r((()=>[c("span",D,p(a.name),1)])),_:2},1032,["class","onClick"])})),128))])),_:1}),e.state.selectedTaskCategory?(o(),i(M,{key:0,modelValue:e.taskChecked,"onUpdate:modelValue":a[2]||(a[2]=a=>e.taskChecked=a)},{default:r((()=>[c(B,null,{default:r((()=>[(o(!0),i(d,null,u(e.state.selectedTaskCategory.items,((t,s)=>(o(),i(z,{title:t.name,key:t.itemID,clickable:"",onClick:a=>e.toggleCheckbox(s)},{"right-icon":r((()=>[c(b,{name:t.name,ref:a=>e.taskCheckboxes[s]=a,onClick:a[1]||(a[1]=g((()=>{}),["stop"]))},null,8,["name"])])),_:2},1032,["title","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])):k("v-if",!0),c("div",x,[c(P,{round:"",block:"",type:"primary",icon:"plus"},{default:r((()=>[T])),_:1})]),c("div",V,[c(P,{round:"",block:"",type:"danger",plain:"",onClick:e.onCancel},{default:r((()=>[Y])),_:1},8,["onClick"])])])),_:1})])),_:1})])),_:1})])};const z=[{taskID:1,name:"ゴミ出し",timeSpan:1},{taskID:2,name:"料理",timeSpan:2},{taskID:3,name:"子供 - 入力準備",timeSpan:2}],B=a({name:"TaskView",components:{"my-header":h,"task-pickker":b},setup(){const e=t({showPopup:!1,activeTab:"today",today:y.dateFormat(new Date,"YYYY/MM/DD (dd)")}),a=s(z),n=s(null);return{state:e,tasks:a,onTaskInputBlur:e=>{if(console.log(e),y.isBlank(e.name)){const t=a.value.findIndex((a=>a.taskID===e.taskID));t>-1&&a.value.splice(t,1)}},taskChecked:n}}});const M={class:"task-view"};B.render=function(e,a,t,s,n,m){const p=l("my-header"),g=l("van-tab"),h=l("van-tabs"),f=l("van-radio"),C=l("van-field"),v=l("van-button"),y=l("van-swipe-cell"),b=l("van-radio-group"),_=l("van-list"),w=l("van-col"),I=l("van-row"),S=l("task-pickker"),D=l("van-popup"),x=l("van-icon");return o(),i("article",M,[c(p,{title:"今日のタスク",subTitle:e.state.today,borderRadius:!1,fixed:!1,height:80},null,8,["subTitle"]),c(h,{class:"task-view__tabs",style:{"box-shadow":"0 6px 12px -12px #969799"},sticky:"",color:"#2f54eb",modelValue:e.state.activeTab,"onUpdate:modelValue":a[1]||(a[1]=a=>e.state.activeTab=a)},{default:r((()=>[c(g,{title:"今日",name:"today"}),c(g,{title:"予定",name:"reservation"})])),_:1},8,["modelValue"]),"today"===e.state.activeTab?(o(),i(I,{key:0},{default:r((()=>[c(w,{span:24,class:"g-pa-xs"},{default:r((()=>[c(_,null,{default:r((()=>[c(b,{modelValue:e.taskChecked,"onUpdate:modelValue":a[2]||(a[2]=a=>e.taskChecked=a)},{default:r((()=>[(o(!0),i(d,null,u(e.tasks,(a=>(o(),i(y,{key:a.taskID},{right:r((()=>[c(v,{square:"",type:"danger",text:"删除"})])),default:r((()=>[c(C,{modelValue:a.name,"onUpdate:modelValue":e=>a.name=e,placeholder:"タスク名を入力",onBlur:t=>e.onTaskInputBlur(a),class:["task-view__input-field",{"task-view__input-field-done":e.taskChecked==a.taskID}]},{"left-icon":r((()=>[c(f,{name:a.taskID,onClick:t=>e.taskChecked=a.taskID},null,8,["name","onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","onBlur","class"])])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})):k("v-if",!0),c(D,{show:e.state.showPopup,"onUpdate:show":a[4]||(a[4]=a=>e.state.showPopup=a),position:"bottom",style:{height:"100%"}},{default:r((()=>[c(S,{onOnCancel:a[3]||(a[3]=a=>e.state.showPopup=!1)})])),_:1},8,["show"]),c("a",{class:"task-view__add",onClick:a[5]||(a[5]=a=>e.state.showPopup=!0)},[c(x,{name:"plus"})])])};export default B;
